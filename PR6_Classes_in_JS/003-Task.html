<!--

    Implement Calculator ctor, that creates extendable calc objects.
    By default Calculator supports "+" and "-" (line 24 and 25)

    Extend functionality with addOperation operation to add new functions (line 27 and 28).

-->

<html>
<head>
    <title></title>
</head>
<body>
    <script>

        function Calculator() {
            this.operations = {
                '+': function(a, b) { return a + b; },
                '-': function(a, b) { return a - b; }
            };

            this.addOperation = function(operator, func) {
                this.operations[operator] = func;
            };

            this.calculate = function(expression) {
                var tokens = expression.split(' ');
                var num1 = parseFloat(tokens[0]);
                var operator = tokens[1];
                var num2 = parseFloat(tokens[2]);
                if (isNaN(num1) || isNaN(num2) || !this.operations[operator]) {
                    return NaN;
                }
                return this.operations[operator](num1, num2);
            };
        }

        var calc = new Calculator();

        alert(calc.calculate("3 + 7")); // output 10
        alert(calc.calculate("7 - 3")); // output 4

        calc.addOperation("*", function (a, b) { return a * b; });
        calc.addOperation("/", function (a, b) { return a / b; });

        alert(calc.calculate("3 * 7")); // output 21
        alert(calc.calculate("8 / 0")); // output 2
    </script>
</body>
</html>
